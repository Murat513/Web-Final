<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Courses Platform - –ì–ª–∞–≤–Ω–∞—è</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="/" class="logo">üéì EduPlatform</a>
            <div class="nav-links">
                <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="/courses.html">–ö—É—Ä—Å—ã</a>
                <a href="/dashboard.html">–ú–æ–∏ –∫—É—Ä—Å—ã</a>
                <a href="/create-course.html">–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å</a>
                <div class="auth-buttons" id="auth-buttons"></div>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1>–û–Ω–ª–∞–π–Ω-–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</h1>
                <p>–ò–∑—É—á–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–∏–∑–∞–π–Ω, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ –¥—Ä—É–≥–∏–µ –Ω–∞–≤—ã–∫–∏ —Å –ª—É—á—à–∏–º–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏</p>
                <a href="/courses.html" class="btn btn-primary btn-lg">–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</a>
            </div>
            <div class="hero-image">
                <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="–û–±—É—á–µ–Ω–∏–µ">
            </div>
        </div>
    </section>

    <section class="courses-section">
        <div class="container">
            <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
            <div class="courses-grid" id="featured-courses">
            </div>
            <a href="/courses.html" class="btn btn-outline">–í—Å–µ –∫—É—Ä—Å—ã</a>
        </div>
    </section>

    <section class="features">
        <div class="container">
            <div class="feature">
                <i class="fas fa-video"></i>
                <h3>–í–∏–¥–µ–æ-—É—Ä–æ–∫–∏</h3>
                <p>–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –æ—Ç —ç–∫—Å–ø–µ—Ä—Ç–æ–≤</p>
            </div>
            <div class="feature">
                <i class="fas fa-certificate"></i>
                <h3>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</h3>
                <p>–ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏</p>
            </div>
            <div class="feature">
                <i class="fas fa-users"></i>
                <h3>–°–æ–æ–±—â–µ—Å—Ç–≤–æ</h3>
                <p>–û–±—â–∞–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏</p>
            </div>
            <div class="feature">
                <i class="fas fa-laptop-code"></i>
                <h3>–ü—Ä–∞–∫—Ç–∏–∫–∞</h3>
                <p>–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –∏ –∑–∞–¥–∞–Ω–∏—è</p>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 2024 Online Courses Platform. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script src="/js/main.js"></script>
    <script>
        async function checkAuth() {
            try {
                const response = await fetch('/api/auth/check', {
                    credentials: 'include'
                });
                const data = await response.json();
                
                const authButtons = document.getElementById('auth-buttons');
                if (!authButtons) return;
                
                if (data.isAuthenticated) {
                    authButtons.innerHTML = `
                        <a href="/dashboard.html" class="btn btn-outline">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                        <button onclick="logout()" class="btn btn-outline">–í—ã–π—Ç–∏</button>
                    `;
                } else {
                    authButtons.innerHTML = `
                        <a href="/login.html" class="btn btn-outline">–í–æ–π—Ç–∏</a>
                        <a href="/register.html" class="btn btn-primary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    `;
                }
            } catch (error) {
                console.error('Auth check error:', error);
            }
        }

        async function logout() {
            try {
                await fetch('/api/auth/logout', {
                    method: 'POST',
                    credentials: 'include'
                });
                window.location.href = '/';
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        async function loadFeaturedCourses() {
            try {
                const response = await fetch('/api/courses');
                const data = await response.json();
                
                const coursesGrid = document.getElementById('featured-courses');
                if (data.success && data.courses) {
                    coursesGrid.innerHTML = '';
                    data.courses.slice(0, 3).forEach(course => {
                        const courseCard = `
                            <div class="course-card">
                                <div class="course-image">
                                    <img src="${course.thumbnail || 'https://images.unsplash.com/photo-1551650975-87deedd944c3?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'}" alt="${course.title}">
                                </div>
                                <div class="course-content">
                                    <h3>${course.title}</h3>
                                    <p>${course.description.substring(0, 100)}...</p>
                                    <div class="course-meta">
                                        <span><i class="fas fa-user"></i> ${course.instructor}</span>
                                        <span><i class="fas fa-clock"></i> ${course.duration} —á</span>
                                        <span><i class="fas fa-signal"></i> ${course.level}</span>
                                    </div>
                                    <div class="course-footer">
                                        <span class="price">${course.price === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : `$${course.price}`}</span>
                                        <a href="/course.html?id=${course.id}" class="btn btn-sm btn-primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                                    </div>
                                </div>
                            </div>
                        `;
                        coursesGrid.innerHTML += courseCard;
                    });
                }
            } catch (error) {
                console.error('Error loading courses:', error);
            }
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏ –∫—É—Ä—Å—ã –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
        document.addEventListener('DOMContentLoaded', async () => {
            await checkAuth();
            await loadFeaturedCourses();
        });
    </script>
</body>
</html>